{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx","large-tooltip.ts","Entry.tsx","SchemaEditor.tsx","Main.tsx"],"names":["SwalReact","withReactContent","Swal","showAbout","fire","showClass","popup","hideClass","customClass","container","htmlContainer","width","showCloseButton","showConfirmButton","html","href","App","onClick","Main","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","LargeTooltip","init","divOuter","createElement","classList","add","divInner","appendChild","body","addTooltip","content","relativeToNode","showTooltip","relativeToNodeBox","getBoundingClientRect","relativeToNodeTop","top","window","pageYOffset","relativeToNodeLeft","left","pageXOffset","divInnerBox","divInnerHeight","height","divInnerWidth","targetTop","targetLeft","oneEmSize","parseFloat","getComputedStyle","fontSize","maximumRight","Math","max","scrollWidth","documentElement","offsetWidth","clientWidth","style","remove","hideTooltip","addEventListener","Entry","props","entries","length","state","rubyClass","pronunciation","this","setState","replace","ch","tooltip","className","map","i","ress","handleClick","lang","join","res","index","字頭","解釋","音韻地位","反切","Fragment","描述","ref","element","joinWithBr","React","Component","JSHINT","音韻地位example","from描述","音韻地位properties","Object","getOwnPropertyNames","concat","getPrototypeOf","slice","deriverParameters","SchemaEditor","parameters","setParameters","input","setSchemaState","loadSchema","cm","options","autocomplete","list","cursor","getCursor","token","getTokenAt","from","Pos","line","start","to","end","filter","prop","startsWith","string","keys","test","event","preventDefault","fetchFile","name","original","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","result","isConfirmed","newProp","target","value","deleteSchema","oldParameters","fromEntries","推導方案","建立","forEach","key","Array","isArray","includes","err","changeParameter","onChange","JSON","parse","stringify","option","type","checked","step","parameter","push","resetParameters","disabled","single","onSubmit","schemas","label","changeSchema","id","mode","lineNumbers","scrollbarStyle","extraKeys","F11","setOption","getOption","Esc","F9","getScrollInfo","lineAtHeight","offset","heightAtLine","prettier","formatWithCursor","getValue","cursorOffset","indexFromPos","parser","plugins","parserBabel","formatted","setValue","position","posFromIndex","scrollTo","setCursor","maxHighlightLength","Infinity","viewportMargin","placeholder","styleActiveLine","autoCloseBrackets","matchBrackets","foldGutter","lint","esversion","gutters","hintOptions","hint","bind","completeSingle","onBeforeChange","data","onCursorActivity","hasFocus","showHint","onFocus","setTimeout","global","Qieyun","query字頭","資料","iter音韻地位","query音韻地位","notifyError","msg","Error","stack","copyFailed","copySuccess","copyFallback","txt","textArea","focus","select","execCommand","removeChild","presetArticle","tupa","baxter","blankego","kyonh","zyepheng","sliark_peengqvim","panwuyun","unt_j","msoeg_v8","mid_tang","chiangxhua","fanwan","putonghua","gwongzau","zaonhe","langjin","taibu","ayaka_v8","convertArticle","convertPresetArticle","exportAllSmallRhymes","exportAllSyllables","exportAllSyllablesWithCount","callback","fetch","response","catch","schemaCopy","Date","array","item","largeTooltip","outputArea","schemaNames","localStorage","getItem","schemaInputs","schemaParameters","article","convertVariant","output","isApplied","userInputs","pass","callDeriver","handles","所有異體字","Yitizi","get","擬音","entry","find","every","split","passage","chs","j","class音韻地位","代表字s","地位","by反切","Map","has","set","values","get代表字","Set","reduce","counter","sort","a","b","k","v","handlePredefinedOptions","textContent","navigator","clipboard","writeText","scrollIntoView","behavior","block","changeValue","setItem","storeSchemas","schema","addSchema","splice","findIndex","rows","autoComplete","autoCorrect","autoCapitalize","spellCheck","required","handleCopy","scrollToOutput"],"mappings":"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","file":"static/js/main.bae1cc35.chunk.js","sourcesContent":["import \"purecss/build/pure.css\";\nimport \"./App.scss\";\nimport Main from \"./Main\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst SwalReact = withReactContent(Swal);\n\nfunction showAbout() {\n  SwalReact.fire({\n    showClass: { popup: \"\" },\n    hideClass: { popup: \"\" },\n    customClass: {\n      container: \"about-modal\",\n      htmlContainer: \"about-modal-content\",\n    },\n    width: \"60vw\",\n    showCloseButton: true,\n    showConfirmButton: false,\n    html: (\n      <>\n        <h2>關於</h2>\n        <p>\n          切韻音系自動推導器（下稱「本頁面」）由 <a href=\"https://nk2028.shn.hk/\">nk2028</a>{\" \"}\n          開發。我們開發有關語言學的項目，尤其是有關歷史漢語語音學，異體字和日語語言學的項目。\n        </p>\n        <p>\n          歡迎加入 QQ 音韻學答疑羣（羣號 526333751）和 Telegram nk2028 社羣（\n          <a href=\"https://t.me/nk2028_discuss\">@nk2028_discuss</a>）。\n        </p>\n        <p>\n          本頁面原始碼公開於 <a href=\"https://github.com/nk2028/qieyun-autoderiver\">GitHub</a>。\n        </p>\n\n        <h2>私隱權政策</h2>\n        <p>\n          本頁面是一項開放原始碼的網絡服務。作為本頁面的開發者，我們對您的私隱非常重視。本頁面的開發者不會透過本頁面收集您的任何資料。\n        </p>\n        <p>下面將具體介紹本頁面能在何種程度上保障您的私隱權。</p>\n        <b>您鍵入的內容</b>\n        <p>\n          本頁面的開發者不會收集您在本頁面中鍵入的任何內容。任何與您鍵入的內容相關的運算全部在您的系統中完成。本頁面不會將包括待標註的文本、標註結果在內的任何資料傳送至任何伺服器。\n        </p>\n        <b>您的其他資料</b>\n        <p>\n          本頁面使用的內容託管於以下站點：GitHub Pages、jsDelivr、Google\n          Fonts。在您訪問本頁面時，您的瀏覽器將與這些站點交互。本頁面的開發者並不能讀取您訪問這些站點時產生的資料，亦無法控制這些站點如何使用您訪問時產生的資料。\n        </p>\n      </>\n    ),\n  });\n}\n\nfunction App() {\n  return (\n    <div>\n      <header>\n        <nav>\n          <h1>\n            <span onClick={showAbout}>切韻音系自動推導器</span>\n          </h1>\n        </nav>\n      </header>\n      <Main />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./large-tooltip.css\";\n\n// https://stackoverflow.com/a/1038781\nfunction getPageWidth() {\n  return Math.max(\n    document.body.scrollWidth,\n    document.documentElement.scrollWidth,\n    document.body.offsetWidth,\n    document.documentElement.offsetWidth,\n    document.documentElement.clientWidth\n  );\n}\n\nfunction init() {\n  const divOuter = document.createElement(\"div\");\n  divOuter.classList.add(\"large-tooltip-outer\");\n  const divInner = document.createElement(\"div\");\n  divInner.classList.add(\"large-tooltip-inner\");\n  divOuter.appendChild(divInner);\n  divInner.classList.add(\"large-tooltip-hidden\");\n  document.body.appendChild(divOuter);\n\n  return {\n    addTooltip: (content: React.ReactElement, relativeToNode: Element) => {\n      function showTooltip() {\n        const relativeToNodeBox = relativeToNode.getBoundingClientRect();\n        const relativeToNodeTop = relativeToNodeBox.top + window.pageYOffset;\n        const relativeToNodeLeft = relativeToNodeBox.left + window.pageXOffset;\n\n        ReactDOM.render(content, divInner);\n\n        const divInnerBox = divInner.getBoundingClientRect();\n        const divInnerHeight = divInnerBox.height;\n        const divInnerWidth = divInnerBox.width;\n\n        const targetTop = relativeToNodeTop - divInnerHeight;\n\n        let targetLeft = relativeToNodeLeft - divInnerWidth / 2; // align center by default\n        const oneEmSize = parseFloat(getComputedStyle(document.body).fontSize);\n        // the distance to left margin of the page should be 1em or greater\n        const miniumLeft = oneEmSize;\n        // if left overflow, align left\n        targetLeft = targetLeft < miniumLeft ? miniumLeft : targetLeft;\n        // the distance to right margin of the page should be 1em or greater\n        const maximumRight = getPageWidth() - oneEmSize - divInnerWidth;\n        // if right overflow, align right\n        targetLeft = targetLeft > maximumRight ? maximumRight : targetLeft;\n\n        divInner.style.top = targetTop + \"px\";\n        divInner.style.left = targetLeft + \"px\";\n\n        divInner.classList.remove(\"large-tooltip-hidden\");\n      }\n      function hideTooltip() {\n        divInner.classList.add(\"large-tooltip-hidden\");\n      }\n      relativeToNode.addEventListener(\"mouseenter\", showTooltip, false);\n      relativeToNode.addEventListener(\"touchstart\", showTooltip, false);\n      relativeToNode.addEventListener(\"mouseleave\", hideTooltip, false);\n      relativeToNode.addEventListener(\"touchend\", hideTooltip, false);\n    },\n  };\n}\n\nconst LargeTooltip = { init };\n\nexport default LargeTooltip;\n","import React from \"react\";\nimport { Entries, joinWithBr } from \"./Main\";\n\ninterface EntryProps {\n  ch: string;\n  entries: Entries;\n  tooltip: any;\n}\n\ninterface EntryState {\n  rubyClass: string;\n  pronunciation: string[];\n}\n\nclass Entry extends React.Component<EntryProps, EntryState> {\n  constructor(props: any) {\n    super(props);\n    if (this.props.entries.length) {\n      this.state = {\n        rubyClass: this.props.entries.length > 1 ? \"entry-multiple entry-unresolved\" : \"\",\n        pronunciation: this.props.entries[0][0],\n      };\n    }\n  }\n\n  handleClick(pronunciation: string[]) {\n    this.setState((state: any) => ({\n      pronunciation,\n      rubyClass: state.rubyClass.replace(\" entry-unresolved\", \"\"),\n    }));\n  }\n\n  render() {\n    if (!this.props.entries.length) return <>{this.props.ch}</>;\n\n    const tooltip = (\n      <div className=\"tooltip-items-wrapper\">\n        {this.props.entries.map(([pronunciation, ress], i) => (\n          <p\n            key={i}\n            className={\n              \"tooltip-item\" +\n              (this.props.entries.length > 1 && pronunciation === this.state.pronunciation ? \" selected\" : \"\")\n            }\n            onClick={() => this.handleClick(pronunciation)}>\n            <span className=\"nowrap\" lang=\"och-Latn-fonipa\">\n              {pronunciation.join(\" / \")}\n            </span>{\" \"}\n            {ress.map((res, index) => {\n              const { 字頭, 解釋, 音韻地位 } = res;\n              let { 反切 } = res;\n              反切 = 反切 == null ? \"\" : `${反切}切 `;\n              return (\n                <React.Fragment key={index}>\n                  {index !== 0 && <br />}\n                  <span className=\"tooltip-ch\">{字頭}</span> {音韻地位.描述} {反切 + 解釋}\n                </React.Fragment>\n              );\n            })}\n          </p>\n        ))}\n      </div>\n    );\n\n    return (\n      <span className=\"ruby-wrapper\" ref={element => element && this.props.tooltip.addTooltip(tooltip, element)}>\n        <ruby className={this.state.rubyClass}>\n          {this.props.ch}\n          <rp>(</rp>\n          <rt lang=\"och-Latn-fonipa\">{joinWithBr(this.state.pronunciation)}</rt>\n          <rp>)</rp>\n        </ruby>\n      </span>\n    );\n  }\n}\n\nexport default Entry;\n","import React from \"react\";\nimport { Controlled as CodeMirror } from \"react-codemirror2\";\nimport { JSHINT } from \"jshint\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/display/fullscreen\";\nimport \"codemirror/addon/display/fullscreen.css\";\nimport \"codemirror/addon/edit/matchbrackets\";\nimport \"codemirror/addon/edit/closebrackets\";\nimport \"codemirror/addon/fold/foldgutter\";\nimport \"codemirror/addon/fold/foldgutter.css\";\nimport \"codemirror/addon/fold/brace-fold\";\nimport \"codemirror/addon/fold/comment-fold\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/addon/hint/show-hint.css\";\nimport \"codemirror/addon/lint/lint\";\nimport \"codemirror/addon/lint/javascript-lint\";\nimport \"codemirror/addon/lint/lint.css\";\nimport \"codemirror/addon/scroll/simplescrollbars\";\nimport \"codemirror/addon/scroll/simplescrollbars.css\";\nimport \"codemirror/addon/selection/active-line\";\nimport \"codemirror/mode/javascript/javascript\";\n\nimport { 推導方案, 音韻地位 } from \"qieyun\";\nimport { Pos, ShowHintOptions } from \"codemirror\";\nimport Swal from \"sweetalert2\";\nimport { fetchFile, schemas, SchemaState, Parameter } from \"./Main\";\nimport prettier from \"prettier/standalone\";\nimport parserBabel from \"prettier/parser-babel\";\n\n(window as any).JSHINT = JSHINT;\n\ninterface SchemaProps extends SchemaState {\n  setSchemaState: (state: SchemaState) => void;\n  deleteSchema: (state: SchemaState) => void;\n  single: boolean;\n  autocomplete: boolean;\n}\n\nconst 音韻地位example = 音韻地位.from描述(\"幫三凡入\");\nconst 音韻地位properties = Object.getOwnPropertyNames(音韻地位example).concat(\n  Object.getOwnPropertyNames(Object.getPrototypeOf(音韻地位example)).slice(1)\n);\nconst deriverParameters = [\"音韻地位\", \"字頭\"];\n\nclass SchemaEditor extends React.Component<SchemaProps, any> {\n  constructor(props: SchemaProps) {\n    super(props);\n    const parameters = this.setParameters(props.input);\n    if (parameters) props.setSchemaState({ ...props, parameters });\n  }\n\n  componentDidMount() {\n    this.loadSchema();\n  }\n\n  autocomplete(cm: CodeMirror.Editor, options: ShowHintOptions) {\n    if (!this?.props.autocomplete) return;\n\n    const cursor = cm.getCursor();\n    const token = cm.getTokenAt(cursor);\n    let list: string[];\n    let from = Pos(cursor.line, token.start);\n    let to = Pos(cursor.line, token.end);\n    const filter = () => (list = list.filter(prop => prop.startsWith(token.string) && prop !== token.string));\n\n    switch (cm.getTokenAt(Pos(cursor.line, token.start - 1)).string) {\n      case \"音韻地位\":\n        list = 音韻地位properties;\n        break;\n      case \"選項\":\n        list = Object.keys(this.props.parameters);\n        break;\n      default:\n        list = deriverParameters.concat(Object.keys(this.props.parameters).length ? [\"選項\"] : []);\n        if (cursor.ch === token.end && /[\\s!-#%-/:-@[-^`{-~]$/.test(token.string)) from = to;\n        else filter();\n        return { list, from, to };\n    }\n    if (token.string === \".\") from = to;\n    else if (cm.getTokenAt(from).string === \".\") filter();\n    else return;\n    return { list, from, to };\n  }\n\n  loadSchema(event?: any) {\n    if (event) event.preventDefault();\n    // TODO restore after new qieyun-examples deployment\n    //fetchFile(`https://nk2028-1305783649.file.myqcloud.com/qieyun-examples/${this.props.name}.js`, input => {\n    fetchFile(`https://cdn.jsdelivr.net/gh/nk2028/qieyun-examples@main/${this.props.name}.js`, input => {\n      if (event && this.props.input && this.props.input !== this.props.original) {\n        Swal.fire({\n          showClass: { popup: \"\" },\n          hideClass: { popup: \"\" },\n          title: \"是否確定載入？\",\n          text: \"您會遺失所有變更。\",\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonText: \"確定\",\n          cancelButtonText: \"取消\",\n        }).then(result => {\n          if (result.isConfirmed) {\n            this.props.setSchemaState({\n              ...this.props,\n              input,\n              original: input,\n              parameters: this.setParameters(input) || {},\n            });\n          }\n        });\n      } else {\n        const newProp = { ...this.props, original: input };\n        if (event || !this.props.input) {\n          newProp.input = input;\n          newProp.parameters = this.setParameters(input) || {};\n        }\n        this.props.setSchemaState(newProp);\n      }\n    });\n  }\n\n  changeSchema(event: any) {\n    this.props.setSchemaState({ ...this.props, name: event.target.value });\n  }\n\n  deleteSchema() {\n    if (this.props.input && this.props.input !== this.props.original) {\n      Swal.fire({\n        showClass: { popup: \"\" },\n        hideClass: { popup: \"\" },\n        title: \"是否確定刪除？\",\n        text: \"您會遺失所有變更。\",\n        icon: \"warning\",\n        showCancelButton: true,\n        confirmButtonText: \"確定\",\n        cancelButtonText: \"取消\",\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.props.deleteSchema(this.props);\n        }\n      });\n    } else {\n      this.props.deleteSchema(this.props);\n    }\n  }\n\n  setParameters(input: string, oldParameters: Parameter = this.props.parameters): any {\n    try {\n      const parameters = Object.fromEntries(\n        // eslint-disable-next-line no-new-func\n        推導方案.建立(new Function(\"音韻地位\", \"字頭\", \"選項\", input) as 推導方案.原始推導函數<string>).parameters\n      );\n      Object.entries(parameters).forEach(([key, value]) => {\n        if (Array.isArray(value)) {\n          // 推導方案.建立 guarantees:\n          // - value.length >= 2\n          // - value[0] is not an index\n          // - value[0] is in value[1..]\n          if (\n            key in oldParameters &&\n            Array.isArray(oldParameters[key]) &&\n            value.slice(1).includes(oldParameters[key][0])\n          ) {\n            value[0] = oldParameters[key][0];\n          }\n        } else if (key in oldParameters && typeof oldParameters[key] === typeof parameters[key]) {\n          parameters[key] = oldParameters[key];\n        }\n      });\n      return parameters;\n    } catch (err) {}\n  }\n\n  resetParameters() {\n    this.props.setSchemaState({ ...this.props, parameters: this.setParameters(this.props.input, {}) || {} });\n  }\n\n  render() {\n    const changeParameter = (key: string, value: any) => {\n      if (Array.isArray(this.props.parameters[key])) this.props.parameters[key][0] = value;\n      else this.props.parameters[key] = value;\n      this.props.setSchemaState({ ...this.props });\n    };\n\n    const formatCode = (cm: CodeMirror.Editor) => {\n      const cursor = cm.getCursor();\n      const { left, top } = cm.getScrollInfo();\n      const line = cm.lineAtHeight(top, \"local\");\n      const offset = top - cm.heightAtLine(line, \"local\");\n      const { formatted, cursorOffset } = prettier.formatWithCursor(cm.getValue(), {\n        cursorOffset: cm.indexFromPos(cursor),\n        parser: \"babel\",\n        plugins: [parserBabel],\n      });\n      cm.setValue(formatted);\n      const position = cm.posFromIndex(cursorOffset);\n      cm.scrollTo(left, cm.heightAtLine(position.line - cursor.line + line, \"local\") + offset);\n      cm.setCursor(position);\n    };\n\n    let parameters = Object.entries(this.props.parameters)\n      .map(([key, value], index) => {\n        if (Array.isArray(value))\n          return (\n            <label key={index}>\n              {key}\n              <select\n                onChange={event => changeParameter(key, JSON.parse(event.target.value))}\n                value={JSON.stringify(value[0])}>\n                {value.slice(1).map((option, i) => (\n                  <option key={i + 1} value={JSON.stringify(option)}>\n                    {option + \"\"}\n                  </option>\n                ))}\n              </select>\n            </label>\n          );\n        else\n          switch (typeof value) {\n            case \"boolean\":\n              return (\n                <label key={index}>\n                  <input\n                    type=\"checkbox\"\n                    checked={value}\n                    onChange={event => changeParameter(key, event.target.checked)}\n                  />\n                  {key}\n                </label>\n              );\n            case \"number\":\n              return (\n                <label key={index}>\n                  {key}\n                  <input\n                    type=\"number\"\n                    value={value}\n                    step=\"any\"\n                    onChange={event => changeParameter(key, +event.target.value)}\n                  />\n                </label>\n              );\n            case \"string\":\n              return (\n                <label key={index}>\n                  {key}\n                  <input type=\"text\" value={value} onChange={event => changeParameter(key, event.target.value)} />\n                </label>\n              );\n            default:\n              return null;\n          }\n      })\n      .filter(parameter => parameter);\n    parameters.push(\n      parameters.length ? (\n        <input\n          className=\"pure-button\"\n          type=\"button\"\n          value=\"恢復預設值\"\n          onClick={() => this.resetParameters()}\n          key=\"reset\"\n        />\n      ) : (\n        <span key=\"hint\" className=\"hint\">\n          此推導方案無可用選項，請於推導程式中回傳 Object.entries() 形式的陣列以使用「選項」功能。\n        </span>\n      )\n    );\n\n    return (\n      <div className=\"schema-editor\">\n        <form className=\"delete-schema\">\n          <input type=\"button\" title=\"刪除方案\" disabled={this.props.single} onClick={() => this.deleteSchema()} />\n        </form>\n        <form className=\"pure-form\" onSubmit={event => this.loadSchema(event)}>\n          <p>\n            <b>預設推導方案：</b>\n            {Object.entries(schemas).map(([value, label], index) => (\n              <label key={index}>\n                <input\n                  type=\"radio\"\n                  name=\"schema\"\n                  value={value}\n                  checked={this.props.name === value}\n                  onChange={event => this.changeSchema(event)}\n                />\n                {label}\n              </label>\n            ))}\n            <input className=\"pure-button\" type=\"submit\" value=\"載入\" />\n          </p>\n        </form>\n        <div lang=\"en-x-code\" id=\"schemaInput\">\n          <CodeMirror\n            value={this.props.input}\n            options={{\n              mode: \"javascript\",\n              lineNumbers: true,\n              scrollbarStyle: \"overlay\",\n              extraKeys: {\n                F11: cm => cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\")),\n                Esc: cm => cm.setOption(\"fullScreen\", false),\n                F9: formatCode,\n              },\n              maxHighlightLength: Infinity,\n              viewportMargin: 16,\n              placeholder: \"以 JavaScript 輸入推導方案……\",\n              styleActiveLine: true,\n              autoCloseBrackets: true,\n              matchBrackets: true,\n              foldGutter: true,\n              lint: { esversion: Infinity } as any,\n              gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\", \"CodeMirror-lint-markers\"],\n              hintOptions: { hint: this.autocomplete.bind(this), completeSingle: false },\n            }}\n            onBeforeChange={(cm, data, input) => {\n              const newProp = { ...this.props, input };\n              const parameters = this.setParameters(input);\n              if (parameters) newProp.parameters = parameters;\n              this.props.setSchemaState(newProp);\n            }}\n            onCursorActivity={cm => cm.hasFocus() && cm.showHint()}\n            onFocus={cm => setTimeout(() => cm.showHint(), 100)}\n          />\n        </div>\n        <form className=\"pure-form\">\n          <p>\n            <b>選項：</b>\n            {parameters}\n          </p>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SchemaEditor;\n","import React from \"react\";\nimport { 音韻地位 as class音韻地位, 資料, 推導方案 } from \"qieyun\";\nimport Yitizi from \"yitizi\";\nimport LargeTooltip from \"./large-tooltip\";\nimport Entry from \"./Entry\";\nimport SchemaEditor from \"./SchemaEditor\";\nimport Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\n// 推導方案（及控制臺）用\nimport * as Qieyun from \"qieyun\";\n(global as any).Qieyun = Qieyun;\n\nconst { query字頭, iter音韻地位, query音韻地位 } = 資料;\n\nfunction get代表字(地位: class音韻地位): string[] {\n  const by反切 = new Map();\n  for (const { 字頭, 反切 } of query音韻地位(地位)) {\n    if (!by反切.has(反切)) {\n      by反切.set(反切, 字頭);\n    }\n  }\n  return Array.from(by反切.values());\n}\n\nconst SwalReact = withReactContent(Swal);\n\nfunction notifyError(msg: string, err?: unknown) {\n  if (!(err instanceof Error)) {\n    throw err;\n  }\n  if (err?.stack)\n    SwalReact.fire({\n      showClass: { popup: \"\" },\n      hideClass: { popup: \"\" },\n      icon: \"error\",\n      title: \"錯誤\",\n      customClass: \"error-with-stack\" as any,\n      html: (\n        <>\n          <p>{msg}</p>\n          <pre lang=\"en-x-code\">{err.stack.replace(/\\n +at eval[^]+/, \"\")}</pre>\n        </>\n      ),\n      confirmButtonText: \"確定\",\n    });\n  else\n    Swal.fire({\n      showClass: { popup: \"\" },\n      hideClass: { popup: \"\" },\n      icon: \"error\",\n      title: \"錯誤\",\n      text: msg,\n      confirmButtonText: \"確定\",\n    });\n}\n\nfunction copyFailed() {\n  notifyError(\"瀏覽器不支援匯出至剪貼簿，操作失敗\");\n}\n\nfunction copySuccess() {\n  Swal.fire({\n    showClass: { popup: \"\" },\n    hideClass: { popup: \"\" },\n    icon: \"success\",\n    title: \"成功\",\n    text: \"已成功匯出至剪貼簿\",\n    confirmButtonText: \"確定\",\n  });\n}\n\nfunction copyFallback(txt: string) {\n  const textArea = document.createElement(\"textarea\");\n  textArea.value = txt;\n  textArea.style.position = \"fixed\";\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n  try {\n    document.execCommand(\"copy\") ? copySuccess() : copyFailed();\n  } catch (err) {\n    copyFailed();\n  }\n  document.body.removeChild(textArea);\n}\n\nexport const schemas = {\n  tupa: \"切韻拼音\",\n  baxter: \"白一平轉寫\",\n  blankego: \"有女羅馬字\",\n  kyonh: \"古韻羅馬字\",\n  zyepheng: \"隋拼\",\n  sliark_peengqvim: \"Sliark 拼音\",\n  panwuyun: \"潘悟雲擬音\",\n  unt_j: \"unt 切韻擬音 J\",\n  msoeg_v8: \"msoeg 中古拟音 V8\",\n  mid_tang: \"推導盛中唐擬音\",\n  chiangxhua: \"推導《聲音唱和圖》擬音\",\n  fanwan: \"推導《分韻撮要》擬音\",\n  putonghua: \"推導普通話\",\n  gwongzau: \"推導廣州音\",\n  zaonhe: \"推導上海話\",\n  langjin: \"推導南京話\",\n  taibu: \"推導大埔話\",\n  ayaka_v8: \"綾香思考音系\",\n};\n\nconst options = {\n  convertArticle: \"從輸入框中讀取文章，並注音\",\n  convertPresetArticle: \"為預設文章注音\",\n  exportAllSmallRhymes: \"導出所有小韻\",\n  exportAllSyllables: \"導出所有音節\",\n  exportAllSyllablesWithCount: \"導出所有音節，並計數\",\n};\n\ntype Schema = keyof typeof schemas;\ntype Option = keyof typeof options;\n\ninterface MainState {\n  schemas: SchemaState[];\n  article: string;\n  option: Option;\n  convertVariant: boolean;\n  autocomplete: boolean;\n  output: JSX.Element[];\n  isApplied: boolean;\n}\n\nexport interface SchemaState {\n  name: Schema;\n  input: string;\n  original: string;\n  parameters: Parameter;\n  id: number;\n}\n\nexport type Entries = [string[], { 字頭: string; 反切: string | null; 解釋: string; 音韻地位: class音韻地位 }[]][];\n\nexport type Parameter = { [parameter: string]: any };\n\nexport function fetchFile(input: string, callback: (text: string) => void) {\n  fetch(input)\n    .then(response => response.text())\n    .then(callback)\n    .catch(err => notifyError(\"載入檔案失敗\", err));\n}\n\nfunction schemaCopy(): SchemaState {\n  return { name: \"tupa\", input: \"\", original: \"\", parameters: {}, id: +new Date() };\n}\n\nexport function joinWithBr(array: (string | JSX.Element)[]) {\n  return array.map((item, index) => (\n    <React.Fragment key={index}>\n      {index !== 0 && <br />}\n      {item}\n    </React.Fragment>\n  ));\n}\n\nlet presetArticle: string;\n\nclass Main extends React.Component<any, MainState> {\n  largeTooltip?: any;\n\n  outputArea?: HTMLElement;\n\n  constructor(props: any) {\n    super(props);\n\n    const schemaNames: Schema[] = JSON.parse(localStorage.getItem(\"schemas\") || \"[]\");\n    const schemaInputs: string[] = JSON.parse(localStorage.getItem(\"inputs\") || \"[]\");\n    const schemaParameters: Parameter[] = JSON.parse(localStorage.getItem(\"parameters\") || \"[]\");\n\n    this.state = {\n      schemas: schemaNames.length\n        ? schemaNames.map((name, id) => ({\n            name,\n            input: schemaInputs[id],\n            original: \"\",\n            parameters: schemaParameters[id],\n            id,\n          }))\n        : [schemaCopy()],\n      article:\n        localStorage.getItem(\"article\") ||\n        \"遙襟甫暢，逸興遄飛。爽籟發而清風生，纖歌凝而白雲遏。睢園綠竹，氣凌彭澤之樽；鄴水朱華，光照臨川之筆。\" +\n          \"四美具，二難并。窮睇眄於中天，極娛遊於暇日。天高地迥，覺宇宙之無窮；興盡悲來，識盈虛之有數。望長安於日下，目吳會於雲間。\" +\n          \"地勢極而南溟深，天柱高而北辰遠。關山難越，誰悲失路之人。萍水相逢，盡是他鄉之客。懷帝閽而不見，奉宣室以何年？\",\n      option: (localStorage.getItem(\"option\") as Option) || \"convertArticle\",\n      convertVariant: localStorage.getItem(\"convertVariant\") === \"true\",\n      autocomplete: localStorage.getItem(\"autocomplete\") !== \"false\",\n      output: [],\n      isApplied: false,\n    };\n  }\n\n  componentDidMount() {\n    this.largeTooltip = LargeTooltip.init();\n  }\n\n  handlePredefinedOptions() {\n    const id = +new Date() + \":\";\n\n    let userInputs: 推導方案.推導函數<string>[];\n    const parameters = this.state.schemas.map(({ parameters }) => {\n      const pass = { ...parameters };\n      Object.keys(pass).forEach(key => {\n        if (Array.isArray(pass[key])) pass[key] = pass[key][0];\n      });\n      return pass;\n    });\n\n    let callDeriver = (音韻地位: class音韻地位, 字頭: string | null) => {\n      try {\n        return userInputs.map((input, index) => input(音韻地位, 字頭, parameters[index]));\n      } catch (err) {\n        notifyError(\n          字頭\n            ? `推導「${字頭}」字（音韻地位：${音韻地位.描述}）時發生錯誤`\n            : `推導「${音韻地位.描述}」音韻地位（字為 null）時發生錯誤`,\n          err\n        );\n        throw err;\n      }\n    };\n\n    if (this.state.option === \"convertPresetArticle\" && !presetArticle) {\n      fetchFile(\"https://cdn.jsdelivr.net/gh/nk2028/qieyun-text-label@360e36b/index.txt\", article => {\n        presetArticle = article;\n        this.handlePredefinedOptions();\n      });\n      return;\n    }\n\n    let handles = {\n      convertArticle: () =>\n        Array.from(this.state.article).map((ch, i) => {\n          const 所有異體字 = [ch].concat(this.state.convertVariant ? Yitizi.get(ch) : []);\n          const entries: Entries = [];\n\n          for (const 字頭 of 所有異體字) {\n            for (const { 音韻地位, 反切, 解釋 } of query字頭(字頭)) {\n              let 擬音 = callDeriver(音韻地位, 字頭);\n              const entry = entries.find(key => key[0].every((pronunciation, i) => pronunciation === 擬音[i]));\n              if (entry) entry[1].push({ 字頭, 反切, 解釋, 音韻地位 });\n              else entries.push([擬音, [{ 字頭, 反切, 解釋, 音韻地位 }]]);\n            }\n          }\n          return <Entry key={id + i} ch={ch} entries={entries} tooltip={this.largeTooltip}></Entry>;\n        }),\n\n      convertPresetArticle: () =>\n        presetArticle.split(\"\\n\\n\").map((passage, i) => (\n          <React.Fragment key={i}>\n            {passage.split(\"\\n\").map((line, key) => {\n              let output: React.ReactElement[] = [];\n              const chs = Array.from(line);\n\n              for (let i = 0; i < chs.length; i++) {\n                if (chs[i + 1] === \"(\") {\n                  const j = i;\n                  while (chs[++i] !== \")\" && i < chs.length);\n\n                  const 字頭 = chs[j];\n                  const 描述 = chs.slice(j + 2, i).join(\"\");\n                  const 音韻地位 = class音韻地位.from描述(描述);\n                  const 擬音 = callDeriver(音韻地位, 字頭);\n\n                  output.push(\n                    <ruby key={id + j}>\n                      {字頭}\n                      <rp>(</rp>\n                      <rt lang=\"och-Latn-fonipa\">{joinWithBr(擬音)}</rt>\n                      <rp>)</rp>\n                    </ruby>\n                  );\n                } else output.push(<React.Fragment key={id + i}>{chs[i]}</React.Fragment>);\n              }\n\n              return React.createElement(key ? \"p\" : \"h3\", { key }, output);\n            })}\n          </React.Fragment>\n        )),\n\n      exportAllSmallRhymes: () =>\n        Array.from(iter音韻地位()).map((音韻地位, i) => {\n          const 代表字s = get代表字(音韻地位);\n          return (\n            <p key={id + i}>\n              {音韻地位.描述} <span lang=\"och-Latn-fonipa\">{callDeriver(音韻地位, 代表字s[0]).join(\" / \")}</span>{\" \"}\n              {代表字s.join(\"\")}\n            </p>\n          );\n        }),\n\n      exportAllSyllables: () => [\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\n          {Array.from(\n            new Set(Array.from(iter音韻地位()).map(音韻地位 => callDeriver(音韻地位, null).join(\" / \")))\n          ).join(\", \")}\n        </span>,\n      ],\n\n      exportAllSyllablesWithCount: () => [\n        <span lang=\"och-Latn-fonipa\" key={id + 0}>\n          {Array.from(\n            Array.from(iter音韻地位()).reduce((counter, 音韻地位) => {\n              const 擬音 = callDeriver(音韻地位, null).join(\" / \");\n              counter.set(擬音, -~counter.get(擬音));\n              return counter;\n            }, new Map())\n          )\n            .sort((a, b) => b[1] - a[1])\n            .map(([k, v]) => `${k} (${v})`)\n            .join(\", \")}\n        </span>,\n      ],\n    };\n\n    try {\n      userInputs = this.state.schemas.map(({ input }) =>\n        // eslint-disable-next-line no-new-func\n        推導方案.建立(new Function(\"音韻地位\", \"字頭\", \"選項\", input) as 推導方案.原始推導函數<string>)\n      );\n    } catch (err) {\n      notifyError(\"程式碼錯誤\", err);\n      return;\n    }\n    try {\n      this.setState({ output: handles[this.state.option](), isApplied: true });\n    } catch (err) {}\n  }\n\n  handleCopy() {\n    const txt = this.outputArea?.textContent;\n    if (txt) {\n      if (navigator.clipboard) navigator.clipboard.writeText(txt).then(copySuccess, () => copyFallback(txt));\n      else copyFallback(txt);\n    } else notifyError(\"請先進行操作，再匯出結果\");\n  }\n\n  scrollToOutput(element: HTMLElement) {\n    this.outputArea = element;\n    if (this.state.isApplied) {\n      element.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n      this.setState({ isApplied: false });\n    }\n  }\n\n  render() {\n    const changeValue = (key: keyof MainState, value: any) => {\n      this.setState({ [key]: value } as MainState, () => {\n        localStorage.setItem(key, this.state[key] + \"\");\n      });\n    };\n\n    const storeSchemas = () => {\n      localStorage.setItem(\"schemas\", JSON.stringify(this.state.schemas.map(schema => schema.name)));\n      localStorage.setItem(\"inputs\", JSON.stringify(this.state.schemas.map(schema => schema.input)));\n      localStorage.setItem(\"parameters\", JSON.stringify(this.state.schemas.map(schemas => schemas.parameters)));\n    };\n\n    const addSchema = (id: number | null) => {\n      this.setState(({ schemas }) => {\n        schemas = [...schemas];\n        schemas.splice(schemas.findIndex(schema => schema.id === id) + 1, 0, schemaCopy());\n        return { schemas };\n      }, storeSchemas);\n    };\n\n    const setSchemaState = (state: SchemaState) => {\n      this.setState(({ schemas }) => {\n        schemas = [...schemas];\n        schemas[schemas.findIndex(schema => schema.id === state.id)] = state;\n        return { schemas };\n      }, storeSchemas);\n    };\n\n    const deleteSchema = (state: SchemaState) => {\n      this.setState(({ schemas }) => ({ schemas: schemas.filter(schema => schema.id !== state.id) }), storeSchemas);\n    };\n\n    return (\n      <div className=\"main-container\">\n        <form className=\"add-schema\">\n          <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(null)} />\n        </form>\n        {this.state.schemas.map((schema, index, array) => (\n          <React.Fragment key={schema.id}>\n            <SchemaEditor\n              name={schema.name}\n              input={schema.input}\n              original={schema.original}\n              id={schema.id}\n              parameters={schema.parameters}\n              setSchemaState={setSchemaState}\n              deleteSchema={deleteSchema}\n              single={array.length === 1}\n              autocomplete={this.state.autocomplete}\n            />\n            <form className=\"add-schema\">\n              <input type=\"button\" title=\"新增方案\" onClick={() => addSchema(schema.id)} />\n            </form>\n          </React.Fragment>\n        ))}\n\n        <form className=\"pure-form\">\n          <p>\n            <textarea\n              id=\"articleInput\"\n              placeholder=\"輸入框\"\n              rows={5}\n              autoComplete=\"off\"\n              autoCorrect=\"off\"\n              autoCapitalize=\"off\"\n              spellCheck=\"false\"\n              required\n              onChange={event => changeValue(\"article\", event.target.value)}\n              value={this.state.article}\n            />\n          </p>\n          <p>\n            <label>\n              <select onChange={event => changeValue(\"option\", event.target.value)} value={this.state.option}>\n                {Object.entries(options).map(([value, label], index) => (\n                  <option key={index} value={value}>\n                    {label}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <label className={this.state.option === \"convertArticle\" ? \"\" : \"hidden\"}>\n              <input\n                type=\"checkbox\"\n                checked={this.state.convertVariant}\n                onChange={event => changeValue(\"convertVariant\", event.target.checked)}\n              />\n              轉換異體字\n            </label>\n            <input\n              className=\"pure-button pure-button-primary\"\n              type=\"button\"\n              value=\"適用\"\n              onClick={() => this.handlePredefinedOptions()}\n            />\n            <input className=\"pure-button\" type=\"button\" value=\"匯出至剪貼簿\" onClick={() => this.handleCopy()} />\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={this.state.autocomplete}\n                onChange={event => changeValue(\"autocomplete\", event.target.checked)}\n              />\n              編輯推導方案時顯示自動完成\n            </label>\n          </p>\n        </form>\n\n        <output ref={element => element && this.scrollToOutput(element)}>{this.state.output}</output>\n      </div>\n    );\n  }\n}\n\nexport default Main;\n"],"sourceRoot":""}